line-length = 100  			# Максимальная длина строки — 100 символов
target-version = "py312"  	# Целевая версия Python для анализа — 3.12

# Папки и файлы, исключённые из анализа
exclude = [
    ".git",
    "__pycache__",
    "build",
    "dist",
    ".venv",
    "venv",
    "env",
    "tests",
    "examples",
    "*.ipynb"
]

[lint]
extend-select = [
    # --- Базовые правила ---

    "C901",    # слишком сложная структура функции
    "I",       # isort: порядок импортов
    "PERF401", # ручная list comprehension вместо встроенной

    # --- Современный стиль аннотаций и лучшие практики ---

    "FA",     # использование future annotations
    "F404",   # поздний future import
    "PYI",    # специфические правила для .pyi-файлов
    "UP006",  # использовать встроенные типы (list вместо List и т.п.)
    "UP007",  # использовать X | Y вместо Union[X, Y]
    "UP010",  # ненужный future import
    "UP035",  # устаревший импорт
    "UP037",  # аннотации не в кавычках в Python 3.7+
    "UP043",  # ненужные аргументы по умолчанию (например, dict[str, str] == dict)

    # --- Локальные правила проекта ---

    "ANN2",  # отсутствие return type annotation
    "ISC",   # неявная конкатенация строк
    "PERF",  # все правила производительности
    "PGH",   # blanket-исключения в noqa
    "PT",    # стиль написания тестов на pytest
    "RUF10", # неиспользуемый или неверный noqa
    "TRY",   # try-except best practices
    "UP",    # pyupgrade
    "YTT",   # flake8-2020 (устаревшие версии Python)
]

ignore = [
    # --- Неактуальные/конфликтующие правила ---

    "PYI011", # аргументы по умолчанию в .pyi (не важно в обычных проектах)

    # Конфликтующие с форматтером ruff
    "W191", "E111", "E114", "E117", "D206", "D300",
    "Q000", "Q001", "Q002", "Q003", "COM812", "COM819",

    # --- Локальные исключения ---

    "PERF203", # try-except внутри цикла — разрешено
    "PT007",   # параметризация pytest (будет настроено позже)
    "PT011",   # ожидание исключения — будет уточнено
    "PT012",   # множественные statements в raises
    "TRY003",  # raise без аргументов — разрешено
    "TRY301",  # raise внутри try — допустимо
    "UP015",   # open("file", "r") vs open("file") — используем явное
    "UP038",   # isinstance(x, X | Y) — намеренно избегаем
    "ANN202",  # return type в приватных функциях — не требуется
    "ANN204",  # return type у специальных методов — не требуется
    "TRY400",  # logging.error вместо exception — допустимо
    "E402",    # импорт не в начале файла — иногда оправдано
    "C901",    # сложные функции разрешены в отдельных случаях
]

[lint.isort]
combine-as-imports = true  						# Объединять импорты с `as`
force-single-line = false  						# Не форсировать один импорт на строку
known-first-party = ["type_classification"]  	# Свой проект (для сортировки импортов)

[format]
docstring-code-format = true  					# Форматировать код внутри docstring-блоков
quote-style = "double"  						# Использовать двойные кавычки
skip-magic-trailing-comma = false  				# Сохранять магическую запятую (например, в списках аргументов)
