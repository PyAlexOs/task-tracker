## Горящие задачи:
- [ ] Написать воркеры для gRPC
  - [ ] Customer (в общем API)
  - [ ] Worker модуля распознавания и диаризации речи
  - [ ] Worker модуля обработки текста LLM для RAG и summary
  - [ ] Worker модуля коннекторов канбан досок
  - [ ] Worker модуля симилярити

- [ ] Отладить развертывание приложения
- [ ] Дополнить необходимую логику модуля распознавания и диаризации речи
- [ ] Дополнить необходимую логику модуля коннекторов канбан досок
- [ ] Написать общую логику приложения
- [ ] Написать интерфейс telegram
- [ ] Написать интерфейс streamlit

## Глобальные задачи:
- [ ] Подумать над добавлением cron tasks для запланированной синхронизации канбан досок с чатами стендапов/дэйликов
- [ ] Вынесение в pydantic конфигурации настроек (не забыть --extra ignore)
- [ ] Исправление аннотаций типов согласно mypy везде
- [ ] Закрытие всех TODO
- [ ] Cделать коннектор к еще одной кан-бан доске (возможно Kaiten) для вынесения унифицированного вида response и request

## Задачи по модулям
1. Модуль распознавания и диаризации речи
- [x] Приведение к единому формату файлов для пайплайна обработки
- [x] Dehoising для лучшего распознавания
- [x] Транскрибация аудиофайла с подавленными шумами
- [x] Диаризация транскриптов
- [ ] Получение эмбеддингов для новых спикеров
- [ ] При возвращении сегментов, возвращать эбеды спикеров для присваивания в общем API

2. Модуль обработки текста LLM для RAG и summary
- [x] Общий интерфейс-обёртка LLM
- [x] Локальное поднятие и хождение в API
- [x] Summary для текста
- [x] Summary по спикерам
- [x] Summary по темам (карточки канбан доски)
- [x] RAG по переданному корпусу релевантных текстов

3. Модуль коннекторов канбан досок (по сути прокси)
- [x] Общий интерфейс-обёртка коннекторов
- [x] Коннектор Trello
- [ ] Коннектор Kaiten (Не обязательно, но в планах есть)

  Общий интерфейс-обёртка коннекторов содержит следующие операции:
  - Получение всех досок, доступных по API ключу
  - Получение id доски по названию
  - Получение всех карточек доски
  - Получение всех списков (колонок) доски
  - Получение всех меток доски
  - Получение всех участников доски
  - Получение информации о карточке (особенно важные поля жирным):
    - **название**
    - **описание**
    - **список (столбец)**
    - участники
    - метки
    - чек-листы
    - даты
    - **комментарии**
  - Создание новой карточки с указанием всех полей
  - Перемещение карточки в другой список (столбец)
  - Добавление участника в карточку
  - Добавление комментария в карточку (новый статус, action items и тп)
  - Изменение чек-листа карточки

4. Модуль симилярити для сопоставления саммари текстов и карточек; сравнения эталонных эмбеддингов спикера с распознанными в аудио
- [x] Извлечение эмбеддингов
- [x] Семантическая схожесть текстов (представление карточки и часть саммари аудио)
- [x] Ранжирование корпуса текстов к эталонному по семантической близости (top_p и top_k)
- [ ] Схожесть векторов (для сравнения эталонного голоса спикера и спикера после трансрибации записи)

5. Основиное API сервиса с бизнес-логикой (Customer, который ходит с задачами в workers. Работает напрямую с БД, оркестрируя микросервисы.)
- [ ] Подмодуль работы с БД
- [ ] Подмодуль эндпоинтов (API)
- [ ] Подмодуль с логикой пайплайнов (gRPC Customer)
  Сервис должен иметь возможность запуска запланированных задач и содержать эндпоинты для:
  - [ ] Загрузки аудио и запуска пайплайна обработки
  - [ ] Журнала аудита с изменениями
  - [ ] Регулирование доступов пользователей
  - [ ] Подтверждение внесения предлагаемых изменений
  - [ ] История загруженных файлов и запланированных задач с фильтрами
  - [ ] Добавление нового спикера с помощью сэмпла аудио
  - [ ] RAG (для этого нужно реализовать чанкирование перед извлечением эмбеддингов и запись в БД)

6. Модуль коннекторов пользователей (по сути масштабируемый CLI)
- [ ] Коннектор streamlit
- [ ] Коннектор telegram (в том числе для запроса на подтверждение, уведомлений)
  Для каждого коннектора должен быть реализован следующий функционал:
  - Журнал аудита с изменениями. В перспективе хочу добавить откатку изменений, для этого нужно расширить функционал обёртки коннекторов канбан досок и реализовать сохранение изменяемых полей в БД.
  - Регулирование доступов пользователей (в основном для telegram бота)
  - Подтверждение внесения предлагаемых изменений
  - История загруженных файлов и запланированных задач с фильтрами (с возможностью просмотра карточки файла (аудио, транскрипт, саммари, предпринятые действия)) или карточки запланированной задачи (переписка, саммари, предпринятые действия)
  - Добавление нового спикера с помощью сэмпла аудио
  - RAG (для этого нужно реализовать чанкирование перед извлечением эмбеддингов и запись в БД)
